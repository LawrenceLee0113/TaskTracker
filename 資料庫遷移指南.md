# TaskTracker è³‡æ–™åº«é·ç§»æŒ‡å—
å¾ SQLite é·ç§»è‡³ Docker SQL Server

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹• SQL Server Docker å®¹å™¨

**Windows ä½¿ç”¨è€…ï¼š**
```bash
# ç›´æ¥åŸ·è¡Œæ‰¹æ¬¡æª”
.\start-sqlserver.bat

# æˆ–æ‰‹å‹•åŸ·è¡Œ
docker-compose up -d
```

**macOS/Linux ä½¿ç”¨è€…ï¼š**
```bash
# çµ¦äºˆåŸ·è¡Œæ¬Šé™ä¸¦åŸ·è¡Œ
chmod +x start-sqlserver.sh
./start-sqlserver.sh

# æˆ–æ‰‹å‹•åŸ·è¡Œ
docker-compose up -d
```

### 2. é©—è­‰ SQL Server å®¹å™¨ç‹€æ…‹

```bash
# æª¢æŸ¥å®¹å™¨ç‹€æ…‹
docker-compose ps

# æŸ¥çœ‹å®¹å™¨æ—¥èªŒ
docker-compose logs sqlserver

# æ¸¬è©¦é€£æ¥
docker exec -it tasktracker-sqlserver /opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P TaskTracker123!
```

### 3. å»ºç«‹ Entity Framework é·ç§»

```bash
# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd TaskTracker

# ç§»é™¤èˆŠçš„ Migrationsï¼ˆå¦‚æœå­˜åœ¨ï¼‰
rm -rf Migrations/

# å»ºç«‹åˆå§‹é·ç§»
dotnet ef migrations add InitialCreate

# æ›´æ–°è³‡æ–™åº«
dotnet ef database update
```

### 4. åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼

```bash
# é‚„åŸå¥—ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰
dotnet restore

# å»ºç½®å°ˆæ¡ˆ
dotnet build

# åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼
dotnet run
```

## ğŸ”§ é€£æ¥å­—ä¸²é…ç½®

### ç”Ÿç”¢ç’°å¢ƒ (appsettings.json)
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost,1433;Database=TaskTrackerDB;User Id=sa;Password=TaskTracker123!;TrustServerCertificate=true;"
  }
}
```

### é–‹ç™¼ç’°å¢ƒ (appsettings.Development.json)
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost,1433;Database=TaskTrackerDB_Dev;User Id=sa;Password=TaskTracker123!;TrustServerCertificate=true;"
  }
}
```

## ğŸ“Š è³‡æ–™åº«ç®¡ç†

### å¸¸ç”¨ Docker æŒ‡ä»¤

```bash
# å•Ÿå‹• SQL Server
docker-compose up -d

# åœæ­¢ SQL Server
docker-compose down

# åœæ­¢ä¸¦ç§»é™¤è³‡æ–™ï¼ˆå°å¿ƒä½¿ç”¨ï¼ï¼‰
docker-compose down -v

# æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f sqlserver

# é€²å…¥ SQL Server å®¹å™¨
docker exec -it tasktracker-sqlserver bash
```

### å¸¸ç”¨ Entity Framework æŒ‡ä»¤

```bash
# å»ºç«‹æ–°é·ç§»
dotnet ef migrations add <MigrationName>

# æ›´æ–°è³‡æ–™åº«
dotnet ef database update

# å›æ»¾åˆ°ç‰¹å®šé·ç§»
dotnet ef database update <MigrationName>

# ç§»é™¤æœ€å¾Œä¸€å€‹é·ç§»
dotnet ef migrations remove

# æŸ¥çœ‹é·ç§»ç‹€æ…‹
dotnet ef migrations list

# ç”Ÿæˆ SQL è…³æœ¬
dotnet ef script-migration
```

## ğŸ” ç–‘é›£æ’è§£

### å•é¡Œ 1: é€£æ¥è¢«æ‹’çµ•
**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèª Docker å®¹å™¨æ­£åœ¨é‹è¡Œï¼š`docker-compose ps`
- æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
- é©—è­‰é€£æ¥å­—ä¸²ä¸­çš„å¯†ç¢¼

### å•é¡Œ 2: èªè­‰å¤±æ•—
**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèªå¯†ç¢¼è¤‡é›œåº¦ç¬¦åˆ SQL Server è¦æ±‚
- æª¢æŸ¥ SA_PASSWORD ç’°å¢ƒè®Šæ•¸
- é‡æ–°å•Ÿå‹•å®¹å™¨ï¼š`docker-compose restart`

### å•é¡Œ 3: è³‡æ–™åº«å»ºç«‹å¤±æ•—
**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèªå®¹å™¨å¥åº·ç‹€æ…‹ï¼š`docker-compose ps`
- æ‰‹å‹•åŸ·è¡Œé·ç§»ï¼š`dotnet ef database update`
- æª¢æŸ¥æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ

### å•é¡Œ 4: æ•ˆèƒ½å•é¡Œ
**è§£æ±ºæ–¹æ¡ˆï¼š**
- èª¿æ•´ Docker è¨˜æ†¶é«”é™åˆ¶
- æª¢æŸ¥ SQL Server è¨­å®š
- ç›£æ§å®¹å™¨è³‡æºä½¿ç”¨ï¼š`docker stats`

## ğŸ“ æ³¨æ„äº‹é …

1. **å¯†ç¢¼å®‰å…¨æ€§ï¼š** ç”Ÿç”¢ç’°å¢ƒè«‹æ›´æ”¹é è¨­å¯†ç¢¼
2. **è³‡æ–™æŒä¹…åŒ–ï¼š** ä½¿ç”¨ Docker Volume ç¢ºä¿è³‡æ–™ä¸æœƒéºå¤±
3. **ç¶²è·¯è¨­å®šï¼š** ç¢ºä¿ 1433 åŸ æ²’æœ‰è¢«å…¶ä»–æœå‹™å ç”¨
4. **å‚™ä»½ç­–ç•¥ï¼š** å®šæœŸå‚™ä»½è³‡æ–™åº«
5. **ç’°å¢ƒéš”é›¢ï¼š** é–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ä¸åŒçš„è³‡æ–™åº«åç¨±

## ğŸ”„ å›æ»¾åˆ° SQLiteï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœéœ€è¦å›æ»¾åˆ° SQLiteï¼š

1. ä¿®æ”¹ `TaskTracker.csproj`ï¼š
```xml
<PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="9.0.5" />
```

2. ä¿®æ”¹ `Program.cs`ï¼š
```csharp
options.UseSqlite(builder.Configuration.GetConnectionString("DefaultConnection"))
```

3. ä¿®æ”¹é€£æ¥å­—ä¸²ï¼š
```json
"DefaultConnection": "Data Source=TaskTracker.db"
```

## ğŸ“ æ”¯æ´è³‡æº

- [Entity Framework Core æ–‡ä»¶](https://docs.microsoft.com/en-us/ef/core/)
- [SQL Server Docker å®˜æ–¹æ–‡ä»¶](https://hub.docker.com/_/microsoft-mssql-server)
- [Docker Compose æ–‡ä»¶](https://docs.docker.com/compose/)

**æœ€å¾Œæ›´æ–°ï¼š** 2024å¹´12æœˆ  
**é©ç”¨ç‰ˆæœ¬ï¼š** TaskTracker v2.0 (SQL Server) 